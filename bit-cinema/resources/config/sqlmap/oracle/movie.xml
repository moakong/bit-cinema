<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="kr.co.bit_cinema.repository.mapper.MovieMapper">
	<resultMap id="movieMap" type="Movie">
		<result column="movie_id" property="movieId"/>
		<result column="movie_name" property="movieName"/>
		<result column="release_date" property="releaseDate"/>
		<result column="runtime" property="runtime"/>
		<result column="genre" property="genre"/>
		<result column="certificate" property="certificate"/>
		<result column="storyline" property="storyline"/>
	</resultMap>

	
	<select id="infoMovie" parameterType="int" resultMap="movieMap">
		select *
		  from movies
		 where movie_id = #{movieId}		
	</select>
	
	<resultMap id="orderMovie" type="Movie">
		<result column="movie_id" property="movieId"/>
		<result column="movie_name" property="movieName"/>
	</resultMap>
	
	<select id="boxMovie" resultMap="orderMovie">
		select *
		  from movies, box_order
		 where movies.MOVIE_ID = box_order.MOVIE_ID
		 order by box_order.S_NUMBERS desc
	</select>
	
	<select id="reserMovie" resultMap="orderMovie">
		select *
		  from movies, reser_order
		 where movies.MOVIE_ID = reser_order.MOVIE_ID
		 order by reser_order.R_NUMBERS desc
	</select>
	
	<resultMap type="Director" id="directorMap">
		<result column="director_name" property="directorName"/>
		<result column="profile" property="profile"/>
	</resultMap>
	
 	<select id="selectDirector" parameterType="int" resultMap="directorMap">
		select *
		  from directors
		 where movie_id = #{movieId}
	</select>
	
	<resultMap type="Actor" id="actorMap">
		<result column="actor_name" property="actorName"/>
		<result column="cast_name" property="castName"/>
		<result column="type" property="type"/>
		<result column="profile" property="profile"/>
	</resultMap>
	
	<select id="selectActor" parameterType="int" resultMap="actorMap">
		select *
		  from casts
		 where movie_id = #{movieId}
		 order by type desc
	</select>

	<resultMap type="Media" id="mediaMap">
		<result column="media_name" property="mediaName"/>
		<result column="type" property="type"/>
	</resultMap>
	
	<select id="selectMedia" parameterType="int" resultMap="mediaMap">
		select *
		  from medias
		 where movie_id = #{movieId}
	</select>
	
	   
</mapper>